<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Chi ti·∫øt s·∫£n ph·∫©m</title>
    <link rel="stylesheet" href="Chi ti·∫øt s·∫£n ph·∫©m.css" />
  </head>
  <body>
    <div id="page" class="product-page">
      <!-- LEFT -->
      <div class="product-images">
        <img id="mainImg" class="main-img" src="" />

        <div class="thumbs" id="thumbs">
          <!-- thumbnails s·∫Ω render t·ª´ JS -->
        </div>
      </div>

      <!-- RIGHT -->
      <div class="product-info">
        <span class="category" id="category"></span>
        <h1 id="name" class="title-large"></h1>

        <div class="price-row" id="priceRow">
          <span class="price" id="price"></span>
          <span class="stars" id="stars"></span>
          <span class="rating" id="rating"></span>
        </div>

        <p class="desc" id="desc"></p>
        <p class="desc" id="longDesc"></p>

        <div class="actions">
          <div class="qty">
            <button id="minus">-</button>
            <span id="qty">1</span>
            <button id="plus">+</button>
          </div>
          <button class="btn-cart primary" id="btnCart">üõí Add to Cart</button>
        </div>

        <div class="features" id="features">
          <!-- render t·ª´ JS -->
        </div>

        <div class="tabs" id="tabs">
          <button class="tab active" data-tab="info">Info</button>
          <button class="tab" data-tab="reviews">Reviews</button>
          <button class="tab" data-tab="care">Care</button>
        </div>

        <div class="tab-content" id="tabContent">
          <!-- n·ªôi dung tab t·ª´ JS -->
        </div>
      </div>
    </div>

    <script>
      // ========= JSON S·∫¢N PH·∫®M =========
      const products = [
        {
          id: 1,
          name: "L·ªãch nƒÉm m·ªõi 2026 in h√¨nh m√®o d·ªÖ th∆∞∆°ng",
          category: "Qu√† l∆∞u ni·ªám",
          price: 45.0,
          categoryText: "Qu√† l∆∞u ni·ªám",
          rating: 4.8,
          isNew: true,
          mainImage: "assets/picture/webp/lich1.webp",
          thumbs: [
            "assets/picture/webp/lich1.webp",
            "assets/picture/webp/lich2.webp",
            "assets/picture/webp/lich3.webp",
            "assets/picture/webp/lich4.webp",
          ],
          desc: "B·ªô l·ªãch c√≥ h√¨nh m√®o con ƒë√°ng y√™u c√πng v·ªõi 12 th√°ng trong nƒÉm ph√π h·ª£p ƒë·ªÉ trang tr√≠ b√†n h·ªçc, k·ªá s√°ch.",
          longDesc:
            "B·ªô l·ªãch ƒë∆∞·ª£c l√†m t·ª´ gi·∫•y b√¨a c·ª©ng, h√¨nh th·ª©c ch·ªân chu, ƒë∆∞·ªùng in r√µ n√©t, c√≥ b·ªá ƒë·ª° b·∫±ng g·ªó m·ªèng, m·∫∑t sau c·ªßa t·ªù l·ªãch c≈©ng l√† m·ªôt t·ªù ghi ch√∫.",
          features: [
            { icon: "‚úî", text: "B·ªÅn", className: "feature-good" },
            { icon: "üé®", text: "ƒê·∫πp", className: "feature-fast" },
            { icon: "‚úîÔ∏è", text: "Ti·ªán l·ª£i", className: "feature-return" },
          ],
          tabInfo:
            "B·ªô l·ªãch ƒë·ªÉ b√†n h√¨nh m√®o con ƒë√°ng y√™u, c√≥ gi√° g·ªó, v·ª´a l√† l·ªãch v·ª´a l√† gi·∫•y nh·ªõ, ph√π h·ª£p cho ng∆∞·ªùi l√†m vƒÉn ph√≤ng ",
          tabReviews:
            '"L·ªãch r·∫•t ƒë·∫πp, nƒÉm sau m√¨nh l·∫°i ·ªßng h·ªô ti·∫øp" ‚Äì Lan N. ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ',
          tabCare: "Tr√°nh ƒë·ªÉ d√≠nh n∆∞·ªõc, d√≠nh v·∫øt b·∫©n.",
          classes: {
            page: "product-page dog-theme",
            priceRow: "price-row highlight",
            btnCart: "btn-cart primary",
            category: "category dog-cat",
            title: "title-large",
          },
        },
        {
          id: 2,
          name: "M√≥c kh√≥a h√¨nh ch√≥ m√®o meme vui nh·ªôn ng·ªô nghƒ©nh",
          category: "Qu√† l∆∞u ni·ªám",
          price: 15,
          categoryText: "Qu√† l∆∞u ni·ªám",
          rating: 4.9,
          isNew: false,
          mainImage: "assets/picture/webp/moc4.webp",
          thumbs: [
            "assets/picture/webp/moc4.webp",
            "assets/picture/webp/moc1.webp",
            "assets/picture/webp/moc2.webp",
            "assets/picture/webp/moc3.webp",
          ],
          desc: "M√≥c kh√≥a acrylic in h√¨nh c√°c meme ch√≥ m√®o n·ªïi ti·∫øng tr√™n m·∫°ng x√£ h·ªôi.",
          longDesc:
            "Ch·∫•t li·ªáu nh·ª±a c·ª©ng cassets/picture/webp/ao c·∫•p, in 2 m·∫∑t r√µ n√©t, c√≥ m√†ng b·∫£o v·ªá ch·ªëng tr·∫ßy x∆∞·ªõc. Ph√π h·ª£p treo ch√¨a kh√≥a, balo.",
          features: [
            { icon: "‚ú®", text: "S·∫Øc n√©t", className: "feature-good" },
            { icon: "üé®", text: "M√†u b·ªÅn", className: "feature-fast" },
            { icon: "üîë", text: "Ti·ªán d·ª•ng", className: "feature-return" },
          ],
          tabInfo: "M√≥c kh√≥a nh·ª±a mica d√†y 3mm, khoen kim lo·∫°i kh√¥ng g·ªâ.",
          tabReviews:
            '"Meme nh√¨n h√†i h∆∞·ªõc l·∫Øm, shop ƒë√≥ng g√≥i k·ªπ." ‚Äì Minh T. ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ',
          tabCare:
            "B√≥c l·ªõp m√†ng b·∫£o v·ªá khi m·ªõi mua v·ªÅ ƒë·ªÉ s·∫£n ph·∫©m b√≥ng ƒë·∫πp nh·∫•t.",
          classes: {
            page: "product-page cat-theme",
            priceRow: "price-row",
            btnCart: "btn-cart primary",
            category: "category",
            title: "title-large",
          },
        },

        {
          id: 3,
          name: "assets/picture/webp/ghim c√†i √°o b·∫±ng b√¥ng h√¨nh m√®o ƒëen ch√≥ ƒëen",
          category: "Qu√† l∆∞u ni·ªám",
          price: 23,
          categoryText: "Qu√† l∆∞u ni·ªám",
          rating: 4.7,
          isNew: false,
          mainImage: "assets/picture/webp/ghim1.webp",
          thumbs: [
            "assets/picture/webp/ghim1.webp",
            "assets/picture/webp/ghim2.webp",
            "assets/picture/webp/ghim 2.webp",
            "assets/picture/webp/ghim 3.webp",
          ],
          desc: "assets/picture/webp/ghim c√†i √°o (pin) nh·ªìi b√¥ng m·ªÅm m·∫°i, t·∫°o h√¨nh th√∫ c∆∞ng phong c√°ch t·ªëi gi·∫£n.",
          longDesc:
            "S·∫£n ph·∫©m ƒë∆∞·ª£c kh√¢u tay t·ªâ m·ªâ, m·∫∑t sau c√≥ kim c√†i ch·∫Øc ch·∫Øn. Ph√π h·ª£p c√†i l√™n √°o kho√°c, m≈© ho·∫∑c t√∫i v·∫£i.",
          features: [
            { icon: "üß∂", text: "M·ªÅm m·∫°i", className: "feature-good" },
            { icon: "üßµ", text: "Th·ªß c√¥ng", className: "feature-fast" },
            { icon: "üß∏", text: "ƒê√°ng y√™u", className: "feature-return" },
          ],
          tabInfo:
            "K√≠ch th∆∞·ªõc kho·∫£ng 5x5cm, v·∫£i nhung b√¥ng cassets/picture/webp/ao c·∫•p.",
          tabReviews:
            '"assets/picture/webp/ghim c√†i l√™n t√∫i v·∫£i nh√¨n xinh c·ª±c k·ª≥ lu√¥n." ‚Äì Ng·ªçc A. ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ',
          tabCare: "N·∫øu b·∫©n h√£y gi·∫∑t nh·∫π b·∫±ng tay, tr√°nh d√πng b√†n ch·∫£i c·ª©ng.",
          classes: {
            page: "product-page dog-theme",
            priceRow: "price-row highlight",
            btnCart: "btn-cart primary",
            category: "category",
            title: "title-large",
          },
        },
        {
          id: 4,
          name: "C·∫ßn c√¢u l√¥ng nhi·ªÅu m√†u ch∆°i ƒë√πa v·ªõi m√®o",
          category: "ƒê·ªì cho th√∫ c∆∞ng",
          price: 12,
          categoryText: "ƒê·ªì cho th√∫ c∆∞ng",
          rating: 4.8,
          isNew: true,
          mainImage: "assets/picture/webp/cc1.webp",
          thumbs: [
            "assets/picture/webp/cc1.webp",
            "assets/picture/webp/cc2.webp",
            "assets/picture/webp/cc3.webp",
            "assets/picture/webp/cc4.webp",
          ],
          desc: "ƒê·ªì ch∆°i t∆∞∆°ng t√°c gi√∫p m√®o v·∫≠n ƒë·ªông, gi·∫£m cƒÉng th·∫≥ng.",
          longDesc:
            "C·∫ßn b·∫±ng nh·ª±a d·∫ªo ch·ªãu l·ª±c t·ªët, ph·∫ßn l√¥ng v≈© t·ª± nhi√™n ƒë√≠nh k√®m chu√¥ng nh·ªè t·∫°o √¢m thanh thu h√∫t s·ª± ch√∫ √Ω c·ªßa m√®o.",
          features: [
            { icon: "üéà", text: "Vui nh·ªôn", className: "feature-good" },
            { icon: "‚ö°", text: "D·∫ªo dai", className: "feature-fast" },
            { icon: "üîî", text: "C√≥ chu√¥ng", className: "feature-return" },
          ],
          tabInfo: "Chi·ªÅu d√†i c·∫ßn 50cm, l√¥ng v≈© an to√†n cho th√∫ c∆∞ng.",
          tabReviews:
            '"M√®o nh√† m√¨nh ch∆°i kh√¥ng bi·∫øt m·ªát v·ªõi c√°i n√†y." ‚Äì Ho√†ng Nam ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ',
          tabCare:
            "C·∫•t ƒëi sau khi ch∆°i ƒë·ªÉ tr√°nh m√®o c·∫Øn n√°t l√¥ng v≈© khi kh√¥ng c√≥ gi√°m s√°t.",
          classes: {
            page: "product-page cat-theme",
            priceRow: "price-row",
            btnCart: "btn-cart primary",
            category: "category",
            title: "title-large",
          },
        },
        {
          id: 5,
          name: "D√¢y g·∫∑m b·∫°n tennis 2 ƒë·∫ßu d√†nh cho ch√≥",
          category: "ƒê·ªì cho th√∫ c∆∞ng",
          price: 30,
          categoryText: "ƒê·ªì cho th√∫ c∆∞ng",
          rating: 4.6,
          isNew: false,
          mainImage: "assets/picture/webp/can1.webp",
          thumbs: [
            "assets/picture/webp/can1.webp",
            "assets/picture/webp/can2.webp",
            "assets/picture/webp/can3.webp",
            "assets/picture/webp/can4.webp",
          ],
          desc: "ƒê·ªì ch∆°i d√¢y th·ª´ng b·ªán ch·∫Øc ch·∫Øn k·∫øt h·ª£p b√≥ng tennis ·ªü hai ƒë·∫ßu.",
          longDesc:
            "D√†nh cho c√°c ho·∫°t ƒë·ªông gi·∫±ng co (tug of war) ho·∫∑c n√©m b·∫Øt. Gi√∫p l√†m s·∫°ch rƒÉng v√† r√®n luy·ªán c∆° h√†m cho ch√≥.",
          features: [
            { icon: "üí™", text: "B·ªÅn b·ªâ", className: "feature-good" },
            {
              icon: "üéæ",
              text: "Th·ªÉ thassets/picture/webp/ao",
              className: "feature-fast",
            },
            { icon: "ü¶∑", text: "S·∫°ch rƒÉng", className: "feature-return" },
          ],
          tabInfo:
            "Th·ª´ng cotton t·ª± nhi√™n, b√≥ng tennis kh√¥ng ch·ª©a ch·∫•t ƒë·ªôc h·∫°i.",
          tabReviews:
            '"Ch√≥ nh√† m√¨nh r·∫•t th√≠ch g·∫∑m c√°i n√†y, d√¢y r·∫•t ch·∫Øc." ‚Äì Qu·ªëc Huy ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ',
          tabCare: "N√™n gi·∫∑t ƒë·ªãnh k·ª≥ ƒë·ªÉ lo·∫°i b·ªè n∆∞·ªõc b·ªçt v√† vi khu·∫©n t√≠ch t·ª•.",
          classes: {
            page: "product-page dog-theme",
            priceRow: "price-row highlight",
            btnCart: "btn-cart primary",
            category: "category",
            title: "title-large",
          },
        },
        {
          id: 6,
          name: "√Åo gi·ªØ ·∫•m cho th√∫ c∆∞ng v√†o m√πa ƒë√¥ng",
          category: "ƒê·ªì cho th√∫ c∆∞ng",
          price: 50,
          categoryText: "ƒê·ªì cho th√∫ c∆∞ng",
          rating: 4.9,
          isNew: true,
          mainImage: "assets/picture/webp/ao1.webp",
          thumbs: [
            "assets/picture/webp/ao1.webp",
            "assets/picture/webp/ao2.webp",
            "assets/picture/webp/ao3.webp",
            "assets/picture/webp/ao4.webp",
          ],
          desc: "√Åo n·ªâ l√≥t b√¥ng d√†y d·∫∑n, ki·ªÉu d√°ng th·ªùi trang cho ch√≥ m√®o.",
          longDesc:
            "Ch·∫•t li·ªáu n·ªâ co gi√£n nh·∫π, gi·ªØ nhi·ªát t·ªët, kh√¥ng g√¢y k√≠ch ·ª©ng da. C√≥ nhi·ªÅu size ph√π h·ª£p t·ª´ 2kg ƒë·∫øn 10kg.",
          features: [
            { icon: "üî•", text: "Si√™u ·∫•m", className: "feature-good" },
            { icon: "üëï", text: "Th·ªùi trang", className: "feature-fast" },
            { icon: "üåà", text: "Nhi·ªÅu size", className: "feature-return" },
          ],
          tabInfo: "Ch·∫•t li·ªáu: Cotton & Polyester l√≥t b√¥ng l√¥ng c·ª´u nh√¢n t·∫°o.",
          tabReviews:
            '"√Åo d√†y, ƒë∆∞·ªùng may ƒë·∫πp, b√© nh√† m√¨nh m·∫∑c v·ª´a kh√≠t." ‚Äì Thanh H∆∞∆°ng ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ',
          tabCare: "N√™n gi·∫∑t m√°y ·ªü ch·∫ø ƒë·ªô nh·∫π ho·∫∑c gi·∫∑t tay ƒë·ªÉ gi·ªØ form √°o.",
          classes: {
            page: "product-page cat-theme",
            priceRow: "price-row highlight",
            btnCart: "btn-cart primary",
            category: "category",
            title: "title-large",
          },
        },
      ];

      // ========= L·∫§Y ID T·ª™ URL =========
      const params = new URLSearchParams(window.location.search);
      const productId = parseInt(params.get("id"), 10);

      // ========= T√åM S·∫¢N PH·∫®M =========
      const product = products.find((p) => p.id === productId);

      if (!product) {
        document.body.innerHTML =
          "<h1 style='text-align:center;color:red;'>S·∫£n ph·∫©m kh√¥ng t·ªìn t·∫°i!</h1>";
      } else {
        // ----- G√°n text c∆° b·∫£n -----
        document.title = product.name;
        const nameEl = document.getElementById("name");
        const categoryEl = document.getElementById("category");
        const priceEl = document.getElementById("price");
        const ratingEl = document.getElementById("rating");
        const descEl = document.getElementById("desc");
        const longDescEl = document.getElementById("longDesc");

        nameEl.textContent = product.name;
        categoryEl.textContent = product.categoryText || product.categoryCode;

        priceEl.textContent =
          (product.price * 1000).toLocaleString("vi-VN") + " ƒë";
        ratingEl.textContent = `(${product.rating} / 5.0)`;
        descEl.textContent = product.desc || "";
        longDescEl.textContent = product.longDesc || "";

        // ----- Sassets/picture/webp/ao rating -----
        const fullStars = Math.floor(product.rating || 0);
        const starsStr = "‚òÖ".repeat(fullStars) + "‚òÜ".repeat(5 - fullStars);
        document.getElementById("stars").textContent = starsStr;

        // ----- ·∫¢nh ch√≠nh + thumbnails -----
        const mainImg = document.getElementById("mainImg");
        const thumbsWrap = document.getElementById("thumbs");
        mainImg.src = product.mainImage;

        thumbsWrap.innerHTML = "";
        (product.thumbs || [product.mainImage]).forEach((src, index) => {
          const img = document.createElement("img");
          img.src = src;
          if (index === 0) img.classList.add("active");
          img.addEventListener("click", () => {
            document
              .querySelectorAll("#thumbs img")
              .forEach((t) => t.classList.remove("active"));
            img.classList.add("active");
            mainImg.src = src.replace("200/200", "600/400");
          });
          thumbsWrap.appendChild(img);
        });

        // ----- Features -----
        const featureWrap = document.getElementById("features");
        featureWrap.innerHTML = "";
        (product.features || []).forEach((f) => {
          const div = document.createElement("div");
          if (f.className) div.className = f.className;
          div.innerHTML = `${f.icon || ""}<br>${f.text || ""}`;
          featureWrap.appendChild(div);
        });

        // ----- Classes ƒë·ªông -----
        const classes = product.classes || {};
        if (classes.page)
          document.getElementById("page").className = classes.page;
        if (classes.priceRow)
          document.getElementById("priceRow").className = classes.priceRow;
        if (classes.btnCart)
          document.getElementById("btnCart").className = classes.btnCart;
        if (classes.category)
          document.getElementById("category").className = classes.category;
        if (classes.title)
          document.getElementById("name").className = classes.title;

        // ----- Tabs -----
        const tabContent = document.getElementById("tabContent");
        const tabButtons = document.querySelectorAll("#tabs .tab");

        function renderTab(tab) {
          let html = "";
          if (tab === "info") html = product.tabInfo || "";
          if (tab === "reviews") html = product.tabReviews || "";
          if (tab === "care") html = product.tabCare || "";
          tabContent.innerHTML = `<p>${html}</p>`;
        }

        // M·∫∑c ƒë·ªãnh tab Info
        renderTab("info");

        tabButtons.forEach((btn) => {
          btn.addEventListener("click", () => {
            tabButtons.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            renderTab(btn.dataset.tab);
          });
        });

        // ----- Quantity -----
        let qty = 1;
        const qtyEl = document.getElementById("qty");
        document.getElementById("plus").onclick = () => {
          qty++;
          qtyEl.textContent = qty;
        };
        document.getElementById("minus").onclick = () => {
          if (qty > 1) {
            qty--;
            qtyEl.textContent = qty;
          }
        };
      }
    </script>
    <!-- RECOMMENDED PRODUCTS -->
    <section class="related">
      <div class="related-header">
        <h2>S·∫£n ph·∫©m t∆∞∆°ng t·ª±</h2>
        <a href="S·∫£n ph·∫©m.html" class="related-view-all"
          >Xem to√†n b·ªô s·∫£n ph·∫©m</a
        >
      </div>

      <div class="related-grid" id="relatedGrid"></div>
    </section>
    <script>
      // ===== RELATED PRODUCTS (C√πng danh m·ª•c & Link t·ªõi trang chi ti·∫øt) =====
      const relatedGrid = document.getElementById("relatedGrid");

      const related = products
        .filter((p) => p.category === product.category && p.id !== product.id)
        .slice(0, 4);

      if (related.length > 0) {
        relatedGrid.innerHTML = "";

        related.forEach((item) => {
          const card = document.createElement("div");
          card.className = "related-card";

          // Th√™m s·ª± ki·ªán click cho c·∫£ √¥ s·∫£n ph·∫©m
          card.style.cursor = "pointer";
          card.onclick = () => {
            window.location.href = `Chi ti·∫øt s·∫£n ph·∫©m.html?id=${item.id}`;
          };

          card.innerHTML = `
      <div class="related-card-img-wrap">
        ${item.isNew ? '<span class="related-badge">NEW</span>' : ""}
        <img src="${item.mainImage || item.image}" alt="${
            item.name
          }" class="related-img">
      </div>
      <div class="related-tag">${item.category}</div>
      <div class="related-name">${item.name}</div>
      <div class="related-rating">
        ${"‚òÖ".repeat(Math.floor(item.rating))}${"‚òÜ".repeat(
            5 - Math.floor(item.rating)
          )}
        <span>(${item.rating})</span>
      </div>
      <div class="related-bottom">
        <div class="price">${(item.price * 1000).toLocaleString(
          "vi-VN"
        )} ƒë</div>
        <button class="related-btn">üõí</button>
      </div>
    `;
          relatedGrid.appendChild(card);
        });
      } else {
        document.querySelector(".related").style.display = "none";
      }
    </script>
    <script>
      document.getElementById("btnCart").onclick = () => {
        // 1. L·∫•y d·ªØ li·ªáu gi·ªè h√†ng hi·ªán t·∫°i t·ª´ localStorage (n·∫øu c√≥), n·∫øu kh√¥ng c√≥ th√¨ t·∫°o m·∫£ng r·ªóng
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // 2. T·∫°o ƒë·ªëi t∆∞·ª£ng s·∫£n ph·∫©m mu·ªën th√™m
        const cartItem = {
          id: product.id,
          name: product.name,
          price: product.price,
          image: product.mainImage,
          quantity: parseInt(document.getElementById("qty").textContent),
        };

        // 3. Ki·ªÉm tra s·∫£n ph·∫©m ƒë√£ c√≥ trong gi·ªè h√†ng ch∆∞a
        const existingItem = cart.find((item) => item.id === cartItem.id);
        if (existingItem) {
          existingItem.quantity += cartItem.quantity; // N·∫øu c√≥ r·ªìi th√¨ c·ªông th√™m s·ªë l∆∞·ª£ng
        } else {
          cart.push(cartItem); // N·∫øu ch∆∞a c√≥ th√¨ th√™m m·ªõi v√†o m·∫£ng
        }

        // 4. L∆∞u l·∫°i m·∫£ng v√†o localStorage
        localStorage.setItem("cart", JSON.stringify(cart));

        alert("ƒê√£ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng th√†nh c√¥ng!");
      };
    </script>
  </body>
</html>
